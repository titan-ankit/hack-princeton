<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Political Transparency</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Use Inter as the default font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* A neutral light gray */
            overflow: hidden; /* Prevent body scroll */
        }
        /* Custom scrollbar for chat and main content */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db; /* gray-300 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9ca3af; /* gray-400 */
        }
        /* Hide all views by default */
        .view {
            display: none;
        }
        /* Show the active view */
        .view.active {
            display: block;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="flex h-screen">
        <!-- 1. Minimal Navigation Sidebar -->
        <nav class="w-20 bg-white shadow-lg flex flex-col items-center py-6 space-y-6 flex-shrink-0">
            <!-- Logo -->
            <div class="w-10 h-10 bg-indigo-600 text-white flex items-center justify-center rounded-lg font-bold text-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v.5"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 13a1 1 0 1 0 0 2 1 1 0 1 0 0-2z"/><path d="M12 11h.01"/><path d="M12 17h.01"/><path d="M14 13a1 1 0 1 0 0 2 1 1 0 1 0 0-2z"/><path d="M4.5 10.5c-3 3 1.5 7.5 4.5 4.5s7.5-1.5 4.5-4.5-4.5-4.5-4.5-4.5z"/></svg>
            </div>
            
            <div class="flex flex-col space-y-4">
                <button id="nav-home" class="p-3 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-all" title="Home">
                    <!-- Home Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                </button>
                <button id="nav-compare" class="p-3 text-gray-500 rounded-lg hover:bg-gray-100 hover:text-gray-700 transition-all" title="Compare">
                    <!-- Compare (Scale) Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 16.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0Z"/><path d="M22 16.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0Z"/><path d="M7 16.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0Z"/><path d="M3 7l3 3 3-3"/><path d="m18 7-3 3-3-3"/><path d="M14 7l-3 3-3-3"/><path d="M6 10V3"/><path d="M12 10V3"/><path d="M18 10V3"/></svg>
                </button>
            </div>
        </nav>

        <!-- 2. Main Content Area -->
        <main class="flex-1 overflow-y-auto p-8 md:p-12 bg-gray-50 custom-scrollbar">
            
            <!-- View 1: Dashboard (Default View) -->
            <div id="view-dashboard" class="view active">
                <h1 class="text-4xl font-bold text-gray-900 mb-2">Hey there!</h1>
                <p class="text-xl text-gray-600 mb-8">Here are some interesting stories for you today.</p>

                <!-- Representatives Grid -->
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Your Representatives</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                    <!-- Representative Card (Mock 1) -->
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="flex items-center space-x-5 mb-4">
                            <img class="w-20 h-20 rounded-full object-cover border-4 border-gray-100" src="https://placehold.co/150x150/E2E8F0/4A5568?text=Rep+A" alt="Representative Jane Doe">
                            <div>
                                <h2 class="text-2xl font-bold">Jane Doe</h2>
                                <p class="text-indigo-600 font-medium">Senator (D)</p>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-2 text-sm">Overall Alignment: <span class="font-bold text-green-600">82%</span></p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                            <div class="bg-green-600 h-2.5 rounded-full" style="width: 82%"></div>
                        </div>
                        <button data-rep-id="1" class="view-details-btn w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors">
                            View Details
                        </button>
                    </div>
                    <!-- Representative Card (Mock 2) -->
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="flex items-center space-x-5 mb-4">
                            <img class="w-20 h-20 rounded-full object-cover border-4 border-gray-100" src="https://placehold.co/150x150/E2E8F0/4A5568?text=Rep+B" alt="Representative John Smith">
                            <div>
                                <h2 class="text-2xl font-bold">John Smith</h2>
                                <p class="text-blue-600 font-medium">Representative (R)</p>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-2 text-sm">Overall Alignment: <span class="font-bold text-yellow-600">54%</span></p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 54%"></div>
                        </div>
                        <button data-rep-id="2" class="view-details-btn w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors">
                            View Details
                        </button>
                    </div>
                     <!-- Add more cards as needed -->
                </div>

                <!-- Recent Activity Feed -->
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Recent Activity</h2>
                <div class="space-y-4">
                    <!-- Feed Item -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex items-center space-x-4">
                        <span class="flex-shrink-0 w-10 h-10 bg-green-100 text-green-700 rounded-full flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>
                        </span>
                        <div>
                            <p class="font-semibold text-gray-800">Jane Doe voted <span class="text-green-600">YEA</span> on <span class="text-indigo-600">H.R. 5376 - Inflation Reduction Act</span></p>
                            <p class="text-sm text-gray-500">Source: Congress.gov · 2 days ago</p>
                        </div>
                    </div>
                    <!-- Feed Item -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex items-center space-x-4">
                        <span class="flex-shrink-0 w-10 h-10 bg-yellow-100 text-yellow-700 rounded-full flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                        </span>
                        <div>
                            <p class="font-semibold text-gray-800">John Smith gave a speech on 'Economic Priorities'</p>
                            <p class="text-sm text-gray-500">Source: YouTube (Official Channel) · 3 days ago</p>
                        </div>
                    </div>
                    <!-- Feed Item -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex items-center space-x-4">
                        <span class="flex-shrink-0 w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
                        </span>
                        <div>
                            <p class="font-semibold text-gray-800">John Smith voted <span class="text-red-600">NAY</span> on <span class="text-indigo-600">S. 456 - Small Business Tax Relief</span></p>
                            <p class="text-sm text-gray-500">Source: Congress.gov · 4 days ago</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- View 2: Representative Detail -->
            <div id="view-rep" class="view">
                <!-- Header -->
                <div class="bg-white p-8 rounded-xl shadow-lg mb-8">
                    <div class="flex flex-col md:flex-row md:items-center justify-between">
                        <div class="flex items-center space-x-6 mb-6 md:mb-0">
                            <img class="w-28 h-28 rounded-full object-cover border-4 border-gray-100" src="https://placehold.co/150x150/E2E8F0/4A5568?text=Rep+A" alt="Representative Jane Doe" id="rep-img">
                            <div>
                                <h1 class="text-4xl font-bold" id="rep-name">Jane Doe</h1>
                                <p class="text-2xl text-indigo-600 font-medium" id="rep-title">Senator (D)</p>
                            </div>
                        </div>
                        <div class="flex space-x-3">
                            <button class="flex-1 md:flex-auto bg-gray-100 text-gray-700 font-semibold p-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2">
                                <!-- Mail Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                                <span>Email</span>
                            </button>
                            <button class="flex-1 md:flex-auto bg-gray-100 text-gray-700 font-semibold p-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2">
                                <!-- Phone Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                                <span>Call</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Issue Tabs -->
                <div class="mb-8">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-6 overflow-x-auto" aria-label="Tabs">
                            <button class="py-4 px-1 whitespace-nowrap border-b-2 font-medium text-lg border-indigo-500 text-indigo-600">
                                Economy
                            </button>
                            <button class="py-4 px-1 whitespace-nowrap border-b-2 font-medium text-lg border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                Healthcare
                            </button>
                            <button class="py-4 px-1 whitespace-nowrap border-b-2 font-medium text-lg border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                Environment
                            </button>
                        </nav>
                    </div>
                </div>

                <!-- Tab Content: Economy -->
                <div>
                    <!-- Issue Alignment -->
                    <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                        <h3 class="text-xl font-bold mb-3">Economy Alignment</h3>
                        <p class="text-gray-600 mb-2 text-sm">Rating: <span class="font-bold text-red-600">38%</span> (Low Alignment)</p>
                        <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
                            <div class="bg-red-500 h-4 rounded-full" style="width: 38%"></div>
                        </div>
                        <p class="text-sm text-gray-500">Stated positions on the economy show low alignment with voting record and sponsored bills.</p>
                    </div>

                    <!-- Actions vs Statements -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Stances & Statements -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-2xl font-bold mb-5">Stances & Statements</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="text-gray-700 mb-2">"We must lower costs for working families."</p>
                                    <p class="text-sm text-gray-500">Source: Campaign Speech · Oct 15, 2024</p>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="text-gray-700 mb-2">"I will always fight to reduce the tax burden on small businesses."</p>
                                    <p class="text-sm text-gray-500">Source: Twitter · Nov 01, 2024</p>
                                </div>
                            </div>
                        </div>

                        <!-- Actions & Voting Record -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-2xl font-bold mb-5">Actions & Voting Record</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="font-semibold text-red-600">Voted NAY on H.R. 123 (Family Cost Reduction Act)</p>
                                    <p class="text-sm text-gray-500">Source: Congress.gov · Jan 10, 2025</p>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="font-semibold text-green-600">Voted YEA on S. 456 (Small Business Tax Relief)</p>
                                    <p class="text-sm text-gray-500">Source: Congress.gov · Feb 02, 2025</p>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="font-semibold text-gray-700">Sponsored Bill S. 789 (Corporate Tax Incentive Act)</p>
                                    <p class="text-sm text-gray-500">Source: Congress.gov · Feb 15, 2025</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- View 3: Comparison (Stub) -->
            <div id="view-compare" class="view">
                <h1 class="text-4xl font-bold text-gray-900 mb-8">Compare Representatives</h1>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-bold mb-4">Select Representative 1</h2>
                        <!-- Dropdown/Search would go here -->
                        <select class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option>Choose...</option>
                            <option>Jane Doe</option>
                            <option>John Smith</option>
                        </select>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h2 class="text-2xl font-bold mb-4">Select Representative 2</h2>
                        <!-- Dropdown/Search would go here -->
                        <select class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option>Choose...</option>
                            <option>Jane Doe</option>
                            <option>John Smith</option>
                        </select>
                    </div>
                </div>
            </div>

        </main>

        <!-- 3. Chat Sidebar Container -->
        <div id="chat-container" class="relative transition-all duration-300 ease-in-out w-80 flex-shrink-0">
            <!-- Toggle Button -->
            <button id="toggle-chat-btn" class="absolute top-1/2 -left-4 z-10 bg-white rounded-full p-1.5 shadow-lg text-gray-600 hover:bg-gray-100 transition-colors" style="transform: translateY(-50%);">
                <!-- Icon will be dynamically changed -->
                <svg id="toggle-chat-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform duration-300"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
            
            <!-- Chat Sidebar -->
            <aside id="chat-sidebar" class="w-full bg-white shadow-xl flex flex-col h-screen">
                <!-- Chat Header -->
                <div class="p-6 border-b">
                    <h2 class="text-2xl font-bold">Transparency AI</h2>
                    <p class="text-sm text-gray-500">Ask about bills, stances, or definitions.</p>
                </div>

                <!-- Chat History -->
                <div id="chat-history" class="flex-1 p-6 space-y-4 overflow-y-auto custom-scrollbar">
                    <!-- Initial AI Message -->
                    <div class="flex">
                        <div class="p-4 bg-indigo-50 text-gray-800 rounded-lg rounded-bl-none max-w-xs">
                            <p>Hi! I'm here to help. You can ask me to summarize a bill, compare two politicians, or define a political term.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Pre-prompted Questions -->
                <div class="p-6 border-t border-gray-200">
                    <p class="text-sm font-semibold text-gray-600 mb-3">Start a conversation</p>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="pre-prompt-btn text-sm text-left p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            What does "filibuster" mean?
                        </button>
                        <button class="pre-prompt-btn text-sm text-left p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            Compare Doe vs. Smith on economy.
                        </button>
                        <button class="pre-prompt-btn text-sm text-left p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            Summarize the Inflation Reduction Act.
                        </button>
                        <button class="pre-prompt-btn text-sm text-left p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            Find recent votes on healthcare.
                        </button>
                    </div>
                </div>
                
                <!-- Chat Input -->
                <div class="p-6 border-t border-gray-200 bg-gray-50">
                    <form id="chat-form" class="flex items-center space-x-3">
                        <input id="chat-input" type="text" placeholder="Send a message..." class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <button type="submit" class="p-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            <!-- Send Icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                        </button>
                    </form>
                </div>
            </aside>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const views = {
                dashboard: document.getElementById('view-dashboard'),
                rep: document.getElementById('view-rep'),
                compare: document.getElementById('view-compare')
            };
            const nav = {
                home: document.getElementById('nav-home'),
                compare: document.getElementById('nav-compare')
            };
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatHistory = document.getElementById('chat-history');
            const chatContainer = document.getElementById('chat-container');
            const chatSidebar = document.getElementById('chat-sidebar');
            const toggleChatBtn = document.getElementById('toggle-chat-btn');
            const toggleChatIcon = document.getElementById('toggle-chat-icon');
            
            // --- App State ---
            let currentView = 'dashboard'; // Default view is now dashboard
            let isChatCollapsed = false;

            // --- Mock Data ---
            const mockReps = {
                "1": {
                    name: "Jane Doe",
                    title: "Senator (D)",
                    img: "https://placehold.co/150x150/E2E8F0/4A5568?text=Rep+A"
                },
                "2": {
                    name: "John Smith",
                    title: "Representative (R)",
                    img: "https://placehold.co/150x150/E2E8F0/4A5568?text=Rep+B"
                }
            };

            // --- Functions ---
            
            /**
             * Shows a specific view and hides all others
             * @param {string} viewId - The ID of the view to show ('dashboard', 'rep', etc.)
             */
            function showView(viewId) {
                // Hide all views
                for (const key in views) {
                    views[key].classList.remove('active');
                }
                // Show the target view
                if (views[viewId]) {
                    views[viewId].classList.add('active');
                    currentView = viewId;
                }
            }

            /**
             * Adds a message to the chat history
             * @param {string} message - The text of the message
             * @param {string} sender - 'user' or 'ai'
             */
            function addChatMessage(message, sender) {
                const messageDiv = document.createElement('div');
                let messageClasses = 'p-4 rounded-lg max-w-xs break-words';
                
                if (sender === 'user') {
                    messageDiv.className = 'flex justify-end';
                    messageClasses += ' bg-indigo-600 text-white rounded-br-none';
                } else {
                    messageDiv.className = 'flex justify-start';
                    messageClasses += ' bg-gray-100 text-gray-800 rounded-bl-none';
                }
                
                messageDiv.innerHTML = `<div class="${messageClasses}"><p>${message}</p></div>`;
                chatHistory.appendChild(messageDiv);
                // Scroll to bottom
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }

            /**
             * Simulates an AI response
             */
            function getAiResponse(userMessage) {
                let response = "I'm sorry, I'm just a demo. I can't look that up right now.";
                const lowerMessage = userMessage.toLowerCase();

                if (lowerMessage.includes('filibuster')) {
                    response = "A filibuster is a political procedure in which one or more members of a legislative body prolong debate on proposed legislation so as to delay or entirely prevent a decision.";
                } else if (lowerMessage.includes('compare')) {
                    response = "I can't access live data, but in this demo, Jane Doe has a higher alignment on economy than John Smith.";
                } else if (lowerMessage.includes('h.r. 123')) {
                    response = "The 'Family Cost Reduction Act' is a mock bill for this demo. In this scenario, Jane Doe voted against it while her statements suggested she might support it.";
                }

                setTimeout(() => {
                    addChatMessage(response, 'ai');
                }, 1000);
            }
            
            /**
             * Loads mock data for the representative detail view
             * @param {string} repId - The ID of the representative (e.g., "1")
             */
            function loadRepView(repId) {
                const repData = mockReps[repId];
                if (!repData) return;

                document.getElementById('rep-name').innerText = repData.name;
                document.getElementById('rep-title').innerText = repData.title;
                document.getElementById('rep-img').src = repData.img;
                
                // Here you would fetch and populate real data for this rep
                // For now, we just show the view
                showView('rep');
            }

            /**
             * Toggles the chat sidebar visibility
             */
            function toggleChat() {
                isChatCollapsed = !isChatCollapsed;
                chatContainer.classList.toggle('w-80');
                chatContainer.classList.toggle('w-0');
                chatSidebar.classList.toggle('hidden');
                
                if (isChatCollapsed) {
                    toggleChatIcon.innerHTML = `<polyline points="15 18 9 12 15 6"></polyline>`; // Chevron Left
                    toggleChatIcon.classList.add('rotate-180');
                } else {
                    toggleChatIcon.innerHTML = `<polyline points="9 18 15 12 9 6"></polyline>`; // Chevron Right
                    toggleChatIcon.classList.remove('rotate-180');
                }
            }


            // --- Event Listeners ---
            
            // Chat Toggle Button
            toggleChatBtn.addEventListener('click', toggleChat);

            // Navigation
            nav.home.addEventListener('click', () => {
                showView('dashboard');
            });

            nav.compare.addEventListener('click', () => {
                showView('compare');
            });

            // View Details Buttons (using event delegation)
            document.body.addEventListener('click', (e) => {
                if (e.target.closest('.view-details-btn')) {
                    const repId = e.target.closest('.view-details-btn').dataset.repId;
                    loadRepView(repId);
                }
            });

            // Chat Form Submission
            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const message = chatInput.value.trim();
                if (message) {
                    addChatMessage(message, 'user');
                    getAiResponse(message);
                    chatInput.value = '';
                }
            });

            // Pre-prompted Chat Buttons
            document.querySelectorAll('.pre-prompt-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const message = btn.innerText;
                    addChatMessage(message, 'user');
                    getAiResponse(message);
                });
            });

        });
    </script>
</body>
</html>
